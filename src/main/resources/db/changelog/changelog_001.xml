<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
        xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.1.xsd">

    <changeSet author="tolstiachok123" id="1">
        <sql>
            CREATE TABLE `author` (
            `id` int NOT NULL,
            `first_name` varchar(255) DEFAULT NULL,
            `last_name` varchar(255) DEFAULT NULL,
            PRIMARY KEY (`id`)
            );
        </sql>
    </changeSet>

    <changeSet author="tolstiachok123" id="2">
        <sql>
            CREATE TABLE `tag` (
            `id` int NOT NULL,
            `name` varchar(255) DEFAULT NULL,
            PRIMARY KEY (`id`)
            );
        </sql>
    </changeSet>

    <changeSet author="tolstiachok123" id="3">
        <sql>
            CREATE TABLE `book` (
            `id` int NOT NULL,
            `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            `image_url` varchar(255) DEFAULT NULL,
            `price` decimal(19,2) DEFAULT NULL,
            `title` varchar(255) DEFAULT NULL,
            `updated_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
            `author_id` int NOT NULL,
            PRIMARY KEY (`id`),
            KEY `fk_author_id` (`author_id`),
            CONSTRAINT `fk_author_id` FOREIGN KEY (`author_id`) REFERENCES `author` (`id`)
            );
        </sql>
    </changeSet>

    <changeSet author="tolstiachok123" id="4">
        <sql>
            CREATE TABLE `tag_books` (
            `tag_id` int NOT NULL,
            `books_id` int NOT NULL,
            KEY `FK_books_id` (`books_id`),
            KEY `FK_tag_id` (`tag_id`),
            CONSTRAINT `fk_books_id` FOREIGN KEY (`books_id`) REFERENCES `book` (`id`),
            CONSTRAINT `fk_tag_id` FOREIGN KEY (`tag_id`) REFERENCES `tag` (`id`)
            );
        </sql>
    </changeSet>

</databaseChangeLog>